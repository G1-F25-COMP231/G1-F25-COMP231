{% extends "user_shell.html" %}
{% set active_page = "settings" %}

{% block title %}BudgetMind AI â€” Settings{% endblock %}

{% block head_extras %}
  <!-- Shared dashboard layout/styles -->
  <link rel="stylesheet" href="/static/dashboard.css" />
  <!-- Settings-specific styles (form layout, etc.) -->
  <link rel="stylesheet" href="/static/settings.css" />
{% endblock %}

{% block content %}
  <header class="topbar">
    <button class="icon-btn" id="toggleSidebar">â˜°</button>
    <h1 class="page-title">Settings</h1>
  </header>

  <section class="content">
    <!-- Monthly Budget Card (LOCKABLE) -->
    <div class="card" id="budgetCard">
      <h2>Monthly Budget</h2>
      <p class="subtitle">Set your spending limits to help AI track your goals.</p>

      <!-- This will be shown when locked -->
      <p id="budgetLockedBanner" class="locked-banner hidden">
        Your budget controls are currently locked due to financial vulnerability.
        Please connect with a Financial Advisor for support.
      </p>

      <div class="form-group">
        <label>Total Monthly Budget ($)</label>
        <input type="number" id="totalBudget" placeholder="e.g. 2500" />
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label>Groceries</label>
          <input type="number" id="budgetGroceries" placeholder="e.g. 400" />
        </div>
        <div class="form-group">
          <label>Dining</label>
          <input type="number" id="budgetDining" placeholder="e.g. 250" />
        </div>
        <div class="form-group">
          <label>Transport</label>
          <input type="number" id="budgetTransport" placeholder="e.g. 180" />
        </div>
        <div class="form-group">
          <label>Bills & Utilities</label>
          <input type="number" id="budgetBills" placeholder="e.g. 300" />
        </div>
      </div>
    </div>

    <!-- Advisor card that appears when financially vulnerable -->
    <div class="card hidden" id="advisorLockCard">
      <h2>Get Help From an Advisor</h2>
      <p class="subtitle" id="advisorLockText">
        Our system has flagged your account as financially vulnerable.
        While this is active, your budget settings are locked.  
        Please choose a Financial Advisor to help you manage your finances.
      </p>

      <div class="form-group">
        <label for="advisorSelect">Add an Advisor</label>
        <select id="advisorSelect">
          <option value="">Select a Financial Advisor...</option>
        </select>
      </div>

      <button class="btn-save" id="addAdvisorBtn">âž• Add Advisor</button>

      <p class="subtitle" id="advisorActionMessage" style="margin-top: 10px;"></p>
    </div>

    <div class="card">
      <h2>Dashboard Customization</h2>
      <p class="subtitle">Select which widgets to show on your main dashboard.</p>
      <div class="toggle-list">
        <label><input type="checkbox" checked /> Total Balance</label>
        <label><input type="checkbox" checked /> Monthly Spending</label>
        <label><input type="checkbox" checked /> Savings Goal</label>
        <label><input type="checkbox" /> Category Chart</label>
        <label><input type="checkbox" /> AI Insights</label>

        <!-- NEW: Simplified Dashboard toggle -->
        <label>
          <input type="checkbox" id="simplifiedDashboardToggle" />
          Use Simplified Dashboard by default
        </label>
      </div>
      <p class="subtitle" id="simplifiedDashboardStatus" style="margin-top: 6px;"></p>
    </div>

    <button class="btn-save" id="saveBtn">ðŸ’¾ Save Changes</button>
  </section>

  <footer class="footer">
    <a href="#">About</a> Â· <a href="#">Contact Support</a> Â· <a href="#">Privacy</a>
  </footer>
{% endblock %}

{% block scripts %}
  <script src="/static/settings.js"></script>
{% endblock %}
