<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Compliance Dashboard ‚Äî BudgetMind AI</title>
  <link rel="stylesheet" href="static/compliance-dashboard.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="app">

    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="brand__logo">üí†</div>
        <div class="brand__name">BudgetMind AI</div>
      </div>

      <nav class="nav">
  <nav class="nav">
  <a href="compliance-dashboard.html" class="nav__item">üõ°Ô∏è Compliance Dashboard</a>
  <a href="transaction-table.html" class="nav__item">üìÑ All Transactions</a>
  <a href="compliance-settings.html" class="nav__item">‚öôÔ∏è Compliance Settings</a>
  <a href="/logout" class="nav__item logout">‚Ü©Ô∏è Logout</a>
</nav>

</nav>

    </aside>

    <!-- MAIN -->
    <main class="main">

      <header class="topbar">
        <button class="icon-btn" id="toggleSidebar">‚ò∞</button>
        <h1 class="page-title">Compliance Metrics & Risk Monitoring</h1>
      </header>

      <section class="content">

        <!-- METRIC CARDS -->
        <div class="metrics-grid">

          <div class="metric-card">
            <span class="metric-title">Transactions Reviewed</span>
            <span class="metric-value" id="txReviewed">1,482</span>
          </div>

          <div class="metric-card">
            <span class="metric-title">Flagged Activities</span>
            <span class="metric-value warning" id="flaggedCount">26</span>
          </div>

          <div class="metric-card">
            <span class="metric-title">High-Risk Clients</span>
            <span class="metric-value danger" id="highRiskClients">8</span>
          </div>

          <div class="metric-card">
            <span class="metric-title">Compliance Alerts</span>
            <span class="metric-value alert" id="alertCount">4</span>
          </div>

        </div>

        <!-- RISK CHART -->
        <div class="card chart-card">
          <h2 class="card__title">Risk Level Distribution</h2>
          <p class="card__subtitle">Proportion of risk categories across all client activities.</p>

          <!-- UPDATED SIZE -->
          <div class="chart-container">
            <canvas id="riskChart"></canvas>
          </div>
        </div>

        <!-- ‚≠êÔ∏è‚≠êÔ∏è ADDED ‚Äî FLAG TREND CHART (Story #68) ‚≠êÔ∏è‚≠êÔ∏è -->
        <div class="card chart-card">
          <h2 class="card__title">Flag Trend Over Time</h2>
          <p class="card__subtitle">Weekly or monthly volume of suspicious activity flags.</p>

          <div class="chart-container">
            <canvas id="flagTrendChart"></canvas>
          </div>
        </div>
        <!-- END ADD -->

        <!-- FLAGGED ACTIVITY TABLE -->
        <div class="card table-card">
          <h2 class="card__title">Flagged Activities</h2>

          <table class="flag-table">
            <thead>
              <tr>
                <th>Merchant</th>
                <th>Reason</th>
                <th>Risk</th>
                <th>Date</th>
                <th>Status</th>
              </tr>
            </thead>

            <tbody>

              <!-- ‚≠êÔ∏è‚≠êÔ∏è ADDED ‚Äî Severity Badge UX (Story #67) ‚≠êÔ∏è‚≠êÔ∏è -->
              <tr>
                <td>CryptoBridge</td>
                <td>Unusual spending pattern</td>
                <td><span class="severity-badge high">High</span></td>
                <td>Nov 7, 2025</td>
                <td>Pending Review</td>
              </tr>

              <tr>
                <td>WireBank</td>
                <td>Large transfer flagged</td>
                <td><span class="severity-badge critical">Critical</span></td>
                <td>Nov 6, 2025</td>
                <td>Escalated</td>
              </tr>

              <tr>
                <td>GlobalMarket</td>
                <td>Cross-border transaction</td>
                <td><span class="severity-badge medium">Medium</span></td>
                <td>Nov 5, 2025</td>
                <td>Reviewed</td>
              </tr>

              <tr>
                <td>PayQuick</td>
                <td>Multiple failed attempts</td>
                <td><span class="severity-badge medium">Medium</span></td>
                <td>Nov 4, 2025</td>
                <td>Pending</td>
              </tr>
              <!-- END ADD -->

            </tbody>

          </table>
        </div>

        <!-- ALERTS LOG -->
        <div class="card">
          <h2 class="card__title">Recent Compliance Alerts</h2>

          <ul class="alerts-list">
            <li>‚ö†Ô∏è High-value transfer flagged for investigation.</li>
            <li>‚ö†Ô∏è Possible identity mismatch detected for user ID #2231.</li>
            <li>‚ö†Ô∏è Repeated failed login attempts from international IP.</li>
            <li>‚ö†Ô∏è Unusual merchant activity for client #4412.</li>
          </ul>
        </div>

      </section>

      <footer class="footer">
        <a href="#">About</a> ¬∑ 
        <a href="#">Contact Support</a> ¬∑ 
        <a href="#">Privacy</a>
      </footer>

    </main>
  </div>

  <!-- ‚≠êÔ∏è‚≠êÔ∏è ADDED ‚Äî TREND CHART + RISK CHART JS (Story #63 & #68) ‚≠êÔ∏è‚≠êÔ∏è -->
  <script>
    // RISK PIE CHART
    const riskCtx = document.getElementById('riskChart');
    new Chart(riskCtx, {
      type: 'pie',
      data: {
        labels: ['Low', 'Medium', 'High', 'Critical'],
        datasets: [{
          data: [52, 31, 12, 5],
          backgroundColor: ['#3CCF91', '#F0AD4E', '#E74C3C', '#8B0000']
        }]
      }
    });

    // FLAG TREND LINE CHART
    const trendCtx = document.getElementById('flagTrendChart');
    new Chart(trendCtx, {
      type: 'line',
      data: {
        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
        datasets: [{
          label: 'Flagged Activities',
          data: [4, 7, 5, 10],
          fill: false,
          borderWidth: 3,
          borderColor: '#0dd6ff',
          tension: 0.3
        }]
      }
    });
  </script>
  <!-- END ADD -->

<script src="/static/compliance-dashboard.js" defer></script>
</body>
</html>
